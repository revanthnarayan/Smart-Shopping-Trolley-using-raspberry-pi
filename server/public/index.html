<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="refresh" content="3">
  <title>Shopping Cart</title>
</head>
<body>
	<h1>Shopping Cart</h1>
	<div id="table"></div>
</body>
<script>
	window.onload = async function(){
			data = await fetch('/refresh')
			let x = await data.json()
			let sum = 0
			let table = document.querySelector('#table')
			let ht = "<ul>"
			for(var key in x){
				ht = ht + "<li>"+x[key][0]+" : "+x[key][1]+"</li>"
				sum = sum + Number(x[key][1])
			}
			ht = ht + "</ul>"
			table.innerHTML = ht
			if(sum !== 0){
				table.innerHTML = table.innerHTML +'<h2>Total Price : '+String(sum)+'</h2>'
			}
	}
</script>
</html>
